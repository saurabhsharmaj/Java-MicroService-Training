<configuration>
  <appender name="LOKI" class="com.github.loki4j.logback.Loki4jAppender">
    <http>
      <url>http://localhost:3100/loki/api/v1/push</url> <!-- Loki endpoint -->
      <connectionTimeoutMs>5000</connectionTimeoutMs>
      <readTimeoutMs>10000</readTimeoutMs>
    </http>
    <encoder>
      <pattern>
        {
          "labels": {
            "app": "api-tutorial",
            "level": "%level"
          },
          "timestamp": "%d{yyyy-MM-dd'T'HH:mm:ss.SSS}",
          "line": "%msg"
        }
      </pattern>
    </encoder>
  </appender>

  <root level="INFO">
    <appender-ref ref="LOKI"/>
  </root>
</configuration>
